<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="https://whatacold.github.io/rss.xml"
      title="RSS feed for https://whatacold.github.io/">
<title>A Python re.findall Service</title>
<meta name="author" content="Guangwang Huang">
<meta name="referrer" content="no-referrer">
<link href= "static/style.css" rel="stylesheet" type="text/css" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74588785-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74588785-1');
</script>
</head>
<body>
<div id="preamble" class="status"><div class="header">
<div class="sitelinks">
    <a href="https://github.com/whatacold">GitHub</a> | <a href="https://stackoverflow.com/users/910978/whatacold">Stack Overflow</a> | <a href="mailto:whatacold@gmail.com">Email</a> | <a href="/rss.xml">RSS</a>
</div></div>
<div id="content">
<div class="post-date">21 Oct 2020</div><h1 class="post-title"><a href="https://whatacold.github.io/2020-10-21-a-python-re.findall-service.html">A Python re.findall Service</a></h1>
<p>
As a programmer, I know that grep, sed and awk are powerful for processing text, but they sometimes aren't that straight-forward for specific tasks, as I need to think about how to filter the lines and the columns out. So I wonder if there is a handy way to do these tasks? After using it for a while, I think using regex directly can help, so I launched a <a href="https://texttoolkit.com/re.findall">re.findall service</a> building on top of Python <code>re.findall</code> API.
</p>

<p>
Here are some use cases for it.
</p>

<ol class="org-ol">
<li><p>
Find all words beginning with a specific prefix.
</p>

<p>
Imagine that I have a few paragraphs, and I want to find out all words beginning with the letter 's'. I can do it in a shell session with a command <code>awk '{for(i=1; i&lt;=NF; i++) {print $i}}' /tmp/paragraphs.txt | grep '^\w'</code>, but that's a lot of typing.
</p>

<p>
Now with this service, I can use one regex with just a few steps:
</p>
<ol class="org-ol">
<li>Copy the text to the left input box.</li>
<li>Type in the regex: <code>\bs\w*</code>, and click the button.</li>
<li>The result will show in the right box.</li>
</ol></li>

<li><p>
Extract fields out.
</p>

<p>
It's not uncommon to extract some fields from some lines with a similar structure, such as a Protobuf message definition.
</p>

<p>
Imagine that I need to write a few test cases for a Protobuf-based service, and I have such a message (taken from the <a href="https://developers.google.com/protocol-buffers">Protocol Buffers</a> site) at hand:
</p>

<pre class="example">
message Person {
  required string Name = 1;
  required int32 Id = 2;
  optional string Email = 3;
}
</pre>

<p>
The final test case that I want looks like this (Note that the field names in the <code>set_xxx</code> form must be lower-case):
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #27ae60;">Person</span> <span style="color: #3498db;">person</span>;
person.set_name(<span style="color: #16a085;">"Text Toolkit"</span>);
person.set_id(1024);
person.set_email(<span style="color: #16a085;">"whatacold@gmail.com"</span>);
</pre>
</div>

<p>
The steps are the same as the above use case. Copy the message definition to the left input box and type <code>(\w+) =</code> in the regex box. It will give you the three field names as output, based on what I can quickly complete the test case with Emacs' help.
</p>

<p>
In the contrast, I can also do it using <code>awk '/=/{print $3}' /tmp/person.proto</code>, which is not too complicated (but much more typing) in this case.
</p></li>

<li><p>
Find specific attributes in HTML/XML.
</p>

<p>
As a widely used configuration file format, I sometimes need to find out all value of a specific attribute in an XML file. HTML has a similar file syntax, so here I make an example from HTML. I now need to figure out what types of input I use in a specific HTML file for whatever reasons. How can I do that?
</p>

<p>
With sed, I can <code>sed -n 's:^.*&lt;input.*type="\([^"]\+\)".*$:\1:p' /tmp/test.html</code>, as you can see it, that is quite a complicated command, and I can barely do it right in my first time.
</p>

<p>
But with re.findall service, I simply copy and paste the HTML code, write a regex <code>&lt;input[^&lt;]+type="(\w+)"</code> in the box, and click the button. Want to deduplicate the result? Check the box "unique" and click the button again.
</p></li>
</ol>

<p>
The above three cases are only a few examples that arose around from my daily usage, proving that the service is a simple yet powerful service for some scenarios. And there is another problem that it solves, that the regex syntax varies a bit for grep, sed, and awk. One can hardly make it right when he/she writes it first. With re.findall, one regex syntax for all, that is the Python regex.
</p>
<div class="taglist"><a href="https://whatacold.github.io/tags.html">Tags</a>: <a href="https://whatacold.github.io/tag-python.html">Python</a> <a href="https://whatacold.github.io/tag-texttoolkit.html">texttoolkit</a> </div></div>
<div id="postamble" class="status"></div>
</body>
</html>
